<html>
	<head>
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" integrity="sha256-yr4fRk/GU1ehYJPAs8P4JlTgu0Hdsp4ZKrx8bDEDC3I=" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
		<script src="{{url_for('static', filename='moment.js')}}"></script>
		<link rel="stylesheet" href="{{url_for('static', filename='style.css')}}" type="text/css"></link>
		<title>Flask-SocketIO Test</title>
		<script type="text/javascript" charset="utf-8">
			initApp = function() {
				var socket = io();
				socket.on('connect', function() {
					socket.emit('my event', {data: 'I\'m connected!'});
				});
				socket.on('current_data', function(data) {
					console.log(data);
//					myChart.data.datasets[0].data.push(data.smoke);
//					myChart.update();
				});
				var ctx = document.getElementById('myChart').getContext('2d');
				var myChart = new Chart(ctx, {
					type: 'bar',
					data: {
						labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
						datasets: [{
							label: '# of Votes',
							data: [],
							backgroundColor: [
								'rgba(255, 99, 132, 0.2)',
								'rgba(54, 162, 235, 0.2)',
								'rgba(255, 206, 86, 0.2)',
								'rgba(75, 192, 192, 0.2)',
								'rgba(153, 102, 255, 0.2)',
								'rgba(255, 159, 64, 0.2)'
							],
							borderColor: [
								'rgba(255, 99, 132, 1)',
								'rgba(54, 162, 235, 1)',
								'rgba(255, 206, 86, 1)',
								'rgba(75, 192, 192, 1)',
								'rgba(153, 102, 255, 1)',
								'rgba(255, 159, 64, 1)'
							],
							borderWidth: 1
						}]
					},
					options: {
						scales: {
							yAxes: [{
								ticks: {
									beginAtZero: true
								}
							}]
						},
						maintainAspectRatio: false,
					}
				});
			}
		</script>
	</head>
	<body onLoad="initApp()">
		<div class="chart-container">
			<canvas id="myChart"></canvas>
		</div>
	</body>
</html>
